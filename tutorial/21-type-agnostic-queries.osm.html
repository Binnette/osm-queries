<!DOCTYPE html>
<html class="h-100" prefix="og: http://ogp.me/ns#">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>21 - Type agnostic queries (nwr)</title>

    <meta property="og:type" content="article" />
    <meta property="og:title" content="21 - Type agnostic queries (nwr)" />
    <meta property="og:description" content="A basic tutorial covering the key features of the Overpass language" />
    <meta property="og:image" content="../overpass-doc.png" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="21 - Type agnostic queries (nwr)" />
    <meta name="twitter:image" content="../overpass-doc.png" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

    <link rel="stylesheet" href="../../codemirror.css">

    <script src="../../codemirror.js" type="text/javascript"></script>
    <script src="../../mode/clike/clike.js" type="text/javascript"></script>
    <script src="../../util/multiplex.js" type="text/javascript"></script>

    <style type="text/css">
      .CodeMirror {
        /* Bootstrap Settings */
        box-sizing: border-box;
        margin: 0;
        font: inherit;
        overflow: auto;
        font-family: inherit;
        display: block;
        width: 100%;
        padding: 6px 12px;
        font-size: 14px;
        line-height: 1.42857143;
        color: #555;
        background-color: #fff;
        background-image: none;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075); /* Bootstrap 3 */
        box-shadow: none; /* Bootstrap 4 */
        transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
        /* Code Mirror Settings */
        font-family: monospace;
        position: relative;
        overflow: hidden;
        height: auto;
      }
      .CodeMirror-scrollbar {
        visibility: hidden;
      }
      .CodeMirror-focused {
        /* Bootstrap Settings */
        border-color: #66afe9;
        outline: 0;
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6); /* Bootstrap 3 */
        box-shadow: 0 0 0 .2rem rgba(0, 123, 255, .25); /* Bootstrap 4 */
        transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
      }
      .CodeMirror-scroll {
        height: 100%;
      }

      .bg-color {
        background-color: #e3f2fd;
      }
    </style>

  </head>

  <body class="d-flex flex-column h-100">
    <header>
        <nav class="navbar navbar-expand-md navbar-light bg-color">
            <a class="navbar-brand" href="/"><i class="bi bi-geo-fill"></i> OSM Queries</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
              <ul class="navbar-nav">
                
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      About
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      
                          <a class="dropdown-item" href="../background.html">Background</a>
            		  	  
                          <a class="dropdown-item" href="../contribute.html">Contribute</a>
            		  	  
                          <a class="dropdown-item" href="../licence.html">Licence</a>
            		  	  
                          <a class="dropdown-item" href="../colophon.html">Colophon</a>
            		  	  
                    </div>
                  </li>
        		  	
                
              </ul>
            </div>
        </nav>
    </header>

      <main class="pt-4">
       <div class="container-fluid">
  <div class="row">

    <div class="col-md-auto">
      
        <h5><a href="index.html" class="text-decoration-none">Overpass Tutorial</a></h5>
      

      

      
        <ul class="list-unstyled">
          
            <li class="" >
              <a href="00-node-1.osm.html">00 - The Beginning</a>
            </li>
          
            <li class="" >
              <a href="01-nodes.osm.html">01 - Finding nodes with a bounding box</a>
            </li>
          
            <li class="" >
              <a href="02-node-output.osm.html">02 - Outputting data about nodes</a>
            </li>
          
            <li class="" >
              <a href="03-nodes-basic-filter.osm.html">03 - Filtering nodes that have a tag</a>
            </li>
          
            <li class="" >
              <a href="04-nodes-has-kv.osm.html">04 - Find nodes by matching tags and their values</a>
            </li>
          
            <li class="" >
              <a href="05-nodes-combined-filter.osm.html">05 - Find nodes by applying multiple filters</a>
            </li>
          
            <li class="" >
              <a href="06-nodes-union.osm.html">06 - Extracting multiple sets of nodes</a>
            </li>
          
            <li class="" >
              <a href="07-nodes-differences.osm.html">07 - Calculating differences between results</a>
            </li>
          
            <li class="" >
              <a href="08-nodes-json-output.osm.html">08 - Generating JSON output</a>
            </li>
          
            <li class="" >
              <a href="09-nodes-csv-output.osm.html">09 - Generating CSV output</a>
            </li>
          
            <li class="" >
              <a href="10-the-default-set.osm.html">10 - The default set</a>
            </li>
          
            <li class="" >
              <a href="11-query-a-set.osm.html">11 - Querying a set</a>
            </li>
          
            <li class="" >
              <a href="12-radius-search.osm.html">12 - Searching within a radius using around</a>
            </li>
          
            <li class="" >
              <a href="13-around-with-set.osm.html">12 - Using around to filter against a set of results</a>
            </li>
          
            <li class="" >
              <a href="14-searching-by-polygon.osm.html">14 - Searching by polygon</a>
            </li>
          
            <li class="" >
              <a href="15-ways.osm.html">15 - Finding ways</a>
            </li>
          
            <li class="" >
              <a href="16-ways-and-their-nodes.osm.html">16 - Ways and their nodes</a>
            </li>
          
            <li class="" >
              <a href="17-ways-and-their-tags.osm.html">17 - Ways and their tags</a>
            </li>
          
            <li class="" >
              <a href="18-nodes-and-ways.osm.html">18 - Combining node and way queries</a>
            </li>
          
            <li class="" >
              <a href="19-find-ways-from-nodes.osm.html">19 - Finding ways from their nodes</a>
            </li>
          
            <li class="" >
              <a href="20-relations.osm.html">20 - Finding relations</a>
            </li>
          
            <li class="bg-color" >
              <a href="21-type-agnostic-queries.osm.html">21 - Type agnostic queries (nwr)</a>
            </li>
          
            <li class="" >
              <a href="22-areas.osm.html">22 - Areas</a>
            </li>
          
            <li class="" >
              <a href="23-areas-from-features.osm.html">23 - Finding the areas enclosing a feature</a>
            </li>
          
            <li class="" >
              <a href="24-mapToArea.osm.html">24 - Find the area derived from a feature</a>
            </li>
          
            <li class="" >
              <a href="25-areas-via-nominatim.osm.html">25 - Areas via Nominatim search</a>
            </li>
          
            <li class="" >
              <a href="26-timeouts-and-endpoints.osm.html">26 - Timeouts and endpoints</a>
            </li>
          
        </ul>
      
    </div>

    <div class="col-6">
      <div class="row">
        <div class="col">
          <h2 property="title">21 - Type agnostic queries (nwr)</h2>
        </div>
      </div>
      <div class="row">
        <div class="col">
					<textarea id="overpass" cols="120">
[bbox:-25.38653, 130.99883, -25.31478, 131.08938];
nwr;

//this is equivalent to the following three lines:
//node;
//way;
//relation;

out body;
</textarea>
          <div class="float-right">
            <a class="btn btn-success btn-sm" href="https://overpass-turbo.eu/?Q=%2F%2A%0AObjects+in+the+Openstreetmap+database+can+be+represented+in+different+ways.%0A%0AFor+example+a+shop+might+initially+be+added+as+a+node+%28a+point+location%29%0Aand+later+changed+to+be+represented+by+a+way.+This+might+happen+if+a+mapper+adds%0Aan+outline+for+the+building+in+which+the+business+operates.%0A%0ASometimes+we+want+to+query+using+%60node%60%2C+%60way%60+or+%60relation%60+because+we+know+what%0Adata+we+want.+But+how+do+we+find+things+that+might+be+represented+as+any+of+these%0Atypes%3F%0A%0AWhen+we%27re+not+sure+which+type+to+query+for%2C+then+we+use+one+of+the+following%0Astatements+instead+of+%60node%60%2C+%60way%60+or+%60relation%60%3A%0A%0A%2A+%60nw%60+-+to+find+nodes+and+ways%0A%2A+%60nr%60+-+to+find+nodes+and+relations%0A%2A+%60wr%60+-+to+find+ways+and+relations%0A%2A+%60nwr%60+-+to+find+nodes%2C+ways+and+relations%0A%0AWe+can+apply+tag%2C+%60around%60+and+%60poly%60+filters+with+these+statements+just+like%0Atheir+single+type+equivalents.%0A%0AThis+is+a+much+more+succinct+way+of+finding+objects+of+various+types.+These%0Aare+fairly+recent+additions+to+the+language%2C+so+will+still+occasionally+see%0Aqueries+that+build+up+results+by+querying+for+each+type+in+turn+%28see+the+comments%0Ain+the+example+below%29.%0A%0AThis+example+extracts+all+of+the+nodes%2C+ways+and+relations+in+our+bounding+box.%0A%0A%40title+21+-+Type+agnostic+queries+%28nwr%29%0A%2A%2F%0A%5Bbbox%3A-25.38653%2C+130.99883%2C+-25.31478%2C+131.08938%5D%3B%0Anwr%3B%0A%0A%2F%2Fthis+is+equivalent+to+the+following+three+lines%3A%0A%2F%2Fnode%3B%0A%2F%2Fway%3B%0A%2F%2Frelation%3B%0A%0Aout+body%3B%0A&R" target="_blank">
                <i class="bi bi-play"></i>Run
            </a>
          </div>
					<script>
            CodeMirror.defineMIME("text/x-overpassQL", {
              name: "clike",
              keywords: (function (str) {
                var r = {};
                var a = str.split(" ");
                for (var i = 0; i < a.length; i++) r[a[i]] = true;
                return r;
              })(
                "out json xml custom popup timeout maxsize bbox" + // initial declarations
                  " date diff adiff" + //attic declarations
                  " foreach" + // block statements
                  " relation rel way node is_in area around user uid newer changed poly pivot nwr derived" + // queries
                  " out meta body skel tags ids count qt asc" + // actions
                  " center bb geom" // geometry types
                //+"r w n br bw" // recursors
              )
            });
            CodeMirror.defineMIME("text/x-overpassXML", "xml");
            CodeMirror.defineMode("xml+mustache", function (config) {
              return CodeMirror.multiplexingMode(
                CodeMirror.multiplexingMode(CodeMirror.getMode(config, "xml"), {
                  open: "{{",
                  close: "}}",
                  mode: CodeMirror.getMode(config, "text/plain"),
                  delimStyle: "mustache"
                }),
                {
                  open: "{{style:",
                  close: "}}",
                  mode: CodeMirror.getMode(config, "text/css"),
                  delimStyle: "mustache"
                }
              );
            });
            CodeMirror.defineMode("ql+mustache", function (config) {
              return CodeMirror.multiplexingMode(
                CodeMirror.multiplexingMode(
                  CodeMirror.getMode(config, "text/x-overpassQL"),
                  {
                    open: "{{",
                    close: "}}",
                    mode: CodeMirror.getMode(config, "text/plain"),
                    delimStyle: "mustache"
                  }
                ),
                {
                  open: "{{style:",
                  close: "}}",
                  mode: CodeMirror.getMode(config, "text/css"),
                  delimStyle: "mustache"
                }
              );
            });
					  var editor = CodeMirror.fromTextArea(document.getElementById("overpass"), {
						    autofocus: false,
						    readOnly: true,
                viewportMargin: Infinity,
                mode: "ql+mustache",
						    lineNumbers: true,
                lineWrapping: true,
                matchBrackets: true,
                closeTagEnabled: true,
                closeTagIndent: [
                  "osm-script",
                  "query",
                  "union",
                  "foreach",
                  "difference"
                ]
						  });
					</script>

        </div>
      </div>
      <div class="row">
        <div class="col">
          
						<p property="description"><p>Objects in the Openstreetmap database can be represented in different ways.</p>

<p>For example a shop might initially be added as a node (a point location)
and later changed to be represented by a way. This might happen if a mapper adds
an outline for the building in which the business operates.</p>

<p>Sometimes we want to query using <code>node</code>, <code>way</code> or <code>relation</code> because we know what
data we want. But how do we find things that might be represented as any of these
types?</p>

<p>When we&#39;re not sure which type to query for, then we use one of the following
statements instead of <code>node</code>, <code>way</code> or <code>relation</code>:</p>

<ul>
<li><code>nw</code> - to find nodes and ways</li>
<li><code>nr</code> - to find nodes and relations</li>
<li><code>wr</code> - to find ways and relations</li>
<li><code>nwr</code> - to find nodes, ways and relations</li>
</ul>

<p>We can apply tag, <code>around</code> and <code>poly</code> filters with these statements just like
their single type equivalents.</p>

<p>This is a much more succinct way of finding objects of various types. These
are fairly recent additions to the language, so will still occasionally see
queries that build up results by querying for each type in turn (see the comments
in the example below).</p>

<p>This example extracts all of the nodes, ways and relations in our bounding box.</p>
</p>
					

          <table class="table">
            <tbody>
              
              <tr>
                <td>Source File</td><td><a href="21-type-agnostic-queries.osm"><code>21-type-agnostic-queries.osm</code></a></td>
              </tr>
              
                <tr>
                  <td>Authors</td>
                  <td>
                      <ul class="list-unstyled">
                        
            					       <li><span>Leigh Dodds</span></li>
            					  
                      </ul>
                  </td>
                </tr>
              
              
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>
</div>

      </main>

       <footer class="footer mt-auto py-3 bg-light">
         <div class="container">
           <span class="text-muted">Generated with <a href="http://github.com/ldodds/overpass-doc">overpass-doc</a>.</span>
         </div>
       </footer>


  </body>
</html>
