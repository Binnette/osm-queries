<!DOCTYPE html>
<html class="h-100" prefix="og: http://ogp.me/ns#">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Styling nodes</title>

    <meta property="og:type" content="article" />
    <meta property="og:title" content="Styling nodes" />
    <meta property="og:description" content="Examples of how to style query results using Map CSS" />
    <meta property="og:image" content="../overpass-doc.png" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Styling nodes" />
    <meta name="twitter:image" content="../overpass-doc.png" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

    <link rel="stylesheet" href="../../codemirror.css">

    <script src="../../codemirror.js" type="text/javascript"></script>
    <script src="../../mode/clike/clike.js" type="text/javascript"></script>
    <script src="../../util/multiplex.js" type="text/javascript"></script>

    <style type="text/css">
      .CodeMirror {
        /* Bootstrap Settings */
        box-sizing: border-box;
        margin: 0;
        font: inherit;
        overflow: auto;
        font-family: inherit;
        display: block;
        width: 100%;
        padding: 6px 12px;
        font-size: 14px;
        line-height: 1.42857143;
        color: #555;
        background-color: #fff;
        background-image: none;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075); /* Bootstrap 3 */
        box-shadow: none; /* Bootstrap 4 */
        transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
        /* Code Mirror Settings */
        font-family: monospace;
        position: relative;
        overflow: hidden;
        height: auto;
      }
      .CodeMirror-scrollbar {
        visibility: hidden;
      }
      .CodeMirror-focused {
        /* Bootstrap Settings */
        border-color: #66afe9;
        outline: 0;
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, .6); /* Bootstrap 3 */
        box-shadow: 0 0 0 .2rem rgba(0, 123, 255, .25); /* Bootstrap 4 */
        transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
      }
      .CodeMirror-scroll {
        height: 100%;
      }

      .bg-color {
        background-color: #e3f2fd;
      }
    </style>

  </head>

  <body class="d-flex flex-column h-100">
    <header>
        <nav class="navbar navbar-expand-md navbar-light bg-color">
            <a class="navbar-brand" href="/"><i class="bi bi-geo-fill"></i> OSM Queries</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
              <ul class="navbar-nav">
                
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      About
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                      
                          <a class="dropdown-item" href="../background.html">Background</a>
            		  	  
                          <a class="dropdown-item" href="../contribute.html">Contribute</a>
            		  	  
                          <a class="dropdown-item" href="../licence.html">Licence</a>
            		  	  
                          <a class="dropdown-item" href="../colophon.html">Colophon</a>
            		  	  
                    </div>
                  </li>
        		  	
                
              </ul>
            </div>
        </nav>
    </header>

      <main class="pt-4">
       <div class="container-fluid">
  <div class="row">

    <div class="col-md-auto">
      
        <h5><a href="index.html" class="text-decoration-none">Styling with Map CSS</a></h5>
      

      

      
        <ul class="list-unstyled">
          
            <li class="" >
              <a href="the-bath-key.osm.html">Bath's Hidden Key</a>
            </li>
          
            <li class="" >
              <a href="brondby.osm.html">Br√∏ndby Haveby</a>
            </li>
          
            <li class="" >
              <a href="lotus-bahai-temple.osm.html">Lotus Bahai Temple</a>
            </li>
          
            <li class="" >
              <a href="ways-as-areas.osm.html">Style ways, as areas</a>
            </li>
          
            <li class="" >
              <a href="ways-as-lines.osm.html">Style ways, as lines</a>
            </li>
          
            <li class="bg-color" >
              <a href="styling-nodes.osm.html">Styling nodes</a>
            </li>
          
        </ul>
      
    </div>

    <div class="col-6">
      <div class="row">
        <div class="col">
          <h2 property="title">Styling nodes</h2>
        </div>
      </div>
      <div class="row">
        <div class="col">
					<textarea id="overpass" cols="120">
[bbox:41.88926, 12.49109, 41.8911, 12.49392];
(
  node["shop"];
  node["amenity"];
);
out body;

//MapCSS styles
{{style:
  node { fill-color: red; color: red; fill-opacity: 1;}
  node[amenity=drinking_water] { fill-color: blue; color: blue, fill-opacity 1;}
  node[shop] { fill-color: green; fill-opacity 1; color: black }
  node[amenity=toilets] { icon-image: url("icons/maki/toilets-24.png"); icon-width: 50;}
}}
</textarea>
          <div class="float-right">
            <a class="btn btn-success btn-sm" href="https://overpass-turbo.eu/?Q=%2F%2A%0AThis+query+selects+shops+and+amenities+within+the+Colosseum+in+Rome.%0A%0AThe+query+selects+any+node+with+either+the+shop+or+amenity+tag.+The%0AMapCSS+then+styles+the+nodes+based+on+their+tags+and+values.+This+highlights%0Athat+the+interpreter+has+access+to+all+of+the+data+about+a+map+feature.%0A%0AThe+styling+does+the+following%3A%0A%0A%2A+provides+a+fallback+to+style+any+unexpected+nodes+as+red%0A%2A+styles+drinking+water+fountains+as+blue+circles%0A%2A+styles+shops+as+black+circles+with+a+green+fill%0A%2A+styles+toilets+by+displaying+an+%28oversized%21%29+icon%0A%0AFor+icons%2C+Overpass+Turbo+has+three+sets+available.+See+the+links+below.%0A%0ANote%2C+the+ordering+of+the+styles+is+important.+They%27re+applied+in+order.+so%0Aif+we%27d+put+the+fallback+style+%28the+red+circle%29+at+the+end+then+that%27s+all+we%27d%0Asee.+You+can+try+it.%0A%0AIf+you%27re+wondering.+Its+a+wastebin.%0A%0A%40title+Styling+nodes%0A%40see+https%3A%2F%2Fwiki.openstreetmap.org%2Fwiki%2FOverpass_turbo%2FMapCSS%0A%40see+https%3A%2F%2Fgithub.com%2Ftyrasd%2Foverpass-turbo%2Ftree%2Fmaster%2Ficons%0A%2A%2F%0A%5Bbbox%3A41.88926%2C+12.49109%2C+41.8911%2C+12.49392%5D%3B%0A%28%0A++node%5B%22shop%22%5D%3B%0A++node%5B%22amenity%22%5D%3B%0A%29%3B%0Aout+body%3B%0A%0A%2F%2FMapCSS+styles%0A%7B%7Bstyle%3A%0A++node+%7B+fill-color%3A+red%3B+color%3A+red%3B+fill-opacity%3A+1%3B%7D%0A++node%5Bamenity%3Ddrinking_water%5D+%7B+fill-color%3A+blue%3B+color%3A+blue%2C+fill-opacity+1%3B%7D%0A++node%5Bshop%5D+%7B+fill-color%3A+green%3B+fill-opacity+1%3B+color%3A+black+%7D%0A++node%5Bamenity%3Dtoilets%5D+%7B+icon-image%3A+url%28%22icons%2Fmaki%2Ftoilets-24.png%22%29%3B+icon-width%3A+50%3B%7D%0A%7D%7D%0A&R" target="_blank">
                <i class="bi bi-play"></i>Run
            </a>
          </div>
					<script>
            CodeMirror.defineMIME("text/x-overpassQL", {
              name: "clike",
              keywords: (function (str) {
                var r = {};
                var a = str.split(" ");
                for (var i = 0; i < a.length; i++) r[a[i]] = true;
                return r;
              })(
                "out json xml custom popup timeout maxsize bbox" + // initial declarations
                  " date diff adiff" + //attic declarations
                  " foreach" + // block statements
                  " relation rel way node is_in area around user uid newer changed poly pivot nwr derived" + // queries
                  " out meta body skel tags ids count qt asc" + // actions
                  " center bb geom" // geometry types
                //+"r w n br bw" // recursors
              )
            });
            CodeMirror.defineMIME("text/x-overpassXML", "xml");
            CodeMirror.defineMode("xml+mustache", function (config) {
              return CodeMirror.multiplexingMode(
                CodeMirror.multiplexingMode(CodeMirror.getMode(config, "xml"), {
                  open: "{{",
                  close: "}}",
                  mode: CodeMirror.getMode(config, "text/plain"),
                  delimStyle: "mustache"
                }),
                {
                  open: "{{style:",
                  close: "}}",
                  mode: CodeMirror.getMode(config, "text/css"),
                  delimStyle: "mustache"
                }
              );
            });
            CodeMirror.defineMode("ql+mustache", function (config) {
              return CodeMirror.multiplexingMode(
                CodeMirror.multiplexingMode(
                  CodeMirror.getMode(config, "text/x-overpassQL"),
                  {
                    open: "{{",
                    close: "}}",
                    mode: CodeMirror.getMode(config, "text/plain"),
                    delimStyle: "mustache"
                  }
                ),
                {
                  open: "{{style:",
                  close: "}}",
                  mode: CodeMirror.getMode(config, "text/css"),
                  delimStyle: "mustache"
                }
              );
            });
					  var editor = CodeMirror.fromTextArea(document.getElementById("overpass"), {
						    autofocus: false,
						    readOnly: true,
                viewportMargin: Infinity,
                mode: "ql+mustache",
						    lineNumbers: true,
                lineWrapping: true,
                matchBrackets: true,
                closeTagEnabled: true,
                closeTagIndent: [
                  "osm-script",
                  "query",
                  "union",
                  "foreach",
                  "difference"
                ]
						  });
					</script>

        </div>
      </div>
      <div class="row">
        <div class="col">
          
						<p property="description"><p>This query selects shops and amenities within the Colosseum in Rome.</p>

<p>The query selects any node with either the shop or amenity tag. The
MapCSS then styles the nodes based on their tags and values. This highlights
that the interpreter has access to all of the data about a map feature.</p>

<p>The styling does the following:</p>

<ul>
<li>provides a fallback to style any unexpected nodes as red</li>
<li>styles drinking water fountains as blue circles</li>
<li>styles shops as black circles with a green fill</li>
<li>styles toilets by displaying an (oversized!) icon</li>
</ul>

<p>For icons, Overpass Turbo has three sets available. See the links below.</p>

<p>Note, the ordering of the styles is important. They&#39;re applied in order. so
if we&#39;d put the fallback style (the red circle) at the end then that&#39;s all we&#39;d
see. You can try it.</p>

<p>If you&#39;re wondering. Its a wastebin.</p>
</p>
					

          <table class="table">
            <tbody>
              
                <tr>
                  <td>Links</td>
                  <td>
                    <ul class="list-unstyled">
                      
                           <li><a href="https://wiki.openstreetmap.org/wiki/Overpass_turbo/MapCSS">https://wiki.openstreetmap.org/wiki/Overpass_turbo/MapCSS</a></li>
                      
                           <li><a href="https://github.com/tyrasd/overpass-turbo/tree/master/icons">https://github.com/tyrasd/overpass-turbo/tree/master/icons</a></li>
                      
                    </ul>
                  </td>
                </tr>
              
              <tr>
                <td>Source File</td><td><a href="styling-nodes.osm"><code>styling-nodes.osm</code></a></td>
              </tr>
              
                <tr>
                  <td>Authors</td>
                  <td>
                      <ul class="list-unstyled">
                        
            					       <li><span>Leigh Dodds</span></li>
            					  
                      </ul>
                  </td>
                </tr>
              
              
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>
</div>

      </main>

       <footer class="footer mt-auto py-3 bg-light">
         <div class="container">
           <span class="text-muted">Generated with <a href="http://github.com/ldodds/overpass-doc">overpass-doc</a>.</span>
         </div>
       </footer>


  </body>
</html>
