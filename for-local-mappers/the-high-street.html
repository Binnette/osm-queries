<!DOCTYPE html>
<html class="h-100">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>For Local Mappers</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="codemirror.css">

    <script src="codemirror.js" type="text/javascript"></script>
    <script src="mode/clike/clike.js" type="text/javascript"></script>
    <script src="util/multiplex.js" type="text/javascript"></script>


    <style type="text/css">
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
      main > .container {
        padding: 60px 15px 0;
      }
    </style>

  </head>


  <body class="d-flex flex-column h-100">

    <header>
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
          <div class="container-fluid">
            
              <a class="navbar-brand" href="/">OSM Queries | For Local Mappers</a>
            
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Packages
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="../index.html">Home</a>
                    
                      <a class="dropdown-item" href="..//for-local-mappers/index.html">For Local Mappers</a>
                    
                  </div>
                </li>
                
                
              </ul>
            </div>
          </div>
        </nav>
    </header>

      <main class="flex-shrink-0">
       <div class="container">
      <div class="row">
        <div class="col">
          <div class="row">
              <div id="query-viewer">
					<h2 property="title">Extract data for a typical UK high street</h2>
					
						<p property="description"><p>Finds information for a selection of buildings and amenities
that you might find on a typical UK high street.</p>

<p>The query uses the &quot;nwr&quot; specifier to query for (n)odes,
(w)ays and (r)elations. Sometimes local businesses might
only be tagged as points, in other cases the entire outline of
a building might be drawn and tagged. This allows us to
find information regardless of how its represented on the map.</p>

<p>The query also uses a range of different filters to identify
the information we&#39;re interested in. In this case a variety of
building=* and amenity=* filters. The result will be the union
of all nodes, ways and relations that have these tags.</p>

<p>A global bounding box query filter is used to specify the
location we are interested in. The special &quot;{{bbox}}&quot; syntax here means
this query only works in Overpass Turbo which determines the
bounding box based on your zoom level.</p>

<p>Alternatively you could specify a fixed bounding box:
[bbox:(&quot;...&quot;)] specifying the coordinates.</p>
</p>
					
					<dl>
					  <dt>Source File</dt>
					  <dd><code>the-high-street.op</code></dd>
					  
					  <dt>Author</dt>
					  <dd><span property="creator">Leigh Dodds</span></dd>
					  
					  
					  
					</dl>
					<textarea id="overpass" cols="120" rows="50">/*
 Finds information for a selection of buildings and amenities
 that you might find on a typical UK high street.

 The query uses the "nwr" specifier to query for (n)odes,
 (w)ays and (r)elations. Sometimes local businesses might
 only be tagged as points, in other cases the entire outline of
 a building might be drawn and tagged. This allows us to
 find information regardless of how its represented on the map.

 The query also uses a range of different filters to identify
 the information we're interested in. In this case a variety of
 building=* and amenity=* filters. The result will be the union
 of all nodes, ways and relations that have these tags.

 A global bounding box query filter is used to specify the
 location we are interested in. The special "{{bbox}}" syntax here means
 this query only works in Overpass Turbo which determines the
 bounding box based on your zoom level.

 Alternatively you could specify a fixed bounding box:
 [bbox:("...")] specifying the coordinates.

 @title Extract data for a typical UK high street
 */
[bbox:{{bbox}}];
(
  nwr["building"="retail"];
  nwr["building"="supermarket"];
  nwr["building"="commercial"];

  nwr["amenity"="pub"];
  nwr["amenity"="bar"];
  nwr["amenity"="restaurant"];
  nwr["amenity"="cafe"];
  nwr["amenity"="library"];
  nwr["amenity"="bank"];
  nwr["amenity"="fast_food"];
);
out body;
>;
out skel qt;
</textarea>
					<script>
            CodeMirror.defineMIME("text/x-overpassQL", {
              name: "clike",
              keywords: (function (str) {
                var r = {};
                var a = str.split(" ");
                for (var i = 0; i < a.length; i++) r[a[i]] = true;
                return r;
              })(
                "out json xml custom popup timeout maxsize bbox" + // initial declarations
                  " date diff adiff" + //attic declarations
                  " foreach" + // block statements
                  " relation rel way node is_in area around user uid newer changed poly pivot nwr derived" + // queries
                  " out meta body skel tags ids count qt asc" + // actions
                  " center bb geom" // geometry types
                //+"r w n br bw" // recursors
              )
            });
            CodeMirror.defineMIME("text/x-overpassXML", "xml");
            CodeMirror.defineMode("xml+mustache", function (config) {
              return CodeMirror.multiplexingMode(
                CodeMirror.multiplexingMode(CodeMirror.getMode(config, "xml"), {
                  open: "{{",
                  close: "}}",
                  mode: CodeMirror.getMode(config, "text/plain"),
                  delimStyle: "mustache"
                }),
                {
                  open: "{{style:",
                  close: "}}",
                  mode: CodeMirror.getMode(config, "text/css"),
                  delimStyle: "mustache"
                }
              );
            });
            CodeMirror.defineMode("ql+mustache", function (config) {
              return CodeMirror.multiplexingMode(
                CodeMirror.multiplexingMode(
                  CodeMirror.getMode(config, "text/x-overpassQL"),
                  {
                    open: "{{",
                    close: "}}",
                    mode: CodeMirror.getMode(config, "text/plain"),
                    delimStyle: "mustache"
                  }
                ),
                {
                  open: "{{style:",
                  close: "}}",
                  mode: CodeMirror.getMode(config, "text/css"),
                  delimStyle: "mustache"
                }
              );
            });
					  var editor = CodeMirror.fromTextArea(document.getElementById("overpass"), {
						    height: "250px",
						    width: "250px",
						    autofocus: false,
						    readOnly: true,
                mode: "ql+mustache",
						    lineNumbers: true,
                lineWrapping: true,
                matchBrackets: true,
                closeTagEnabled: true,
                closeTagIndent: [
                  "osm-script",
                  "query",
                  "union",
                  "foreach",
                  "difference"
                ]
						  });
					</script>
          <h3>Test This Query</h3>
					<p>Try this query in Overpass Turbo:</p>
					<ul>
					    <li>
					      <a href="https://overpass-turbo.eu/?Q=%2F%2A%0A+Finds+information+for+a+selection+of+buildings+and+amenities%0A+that+you+might+find+on+a+typical+UK+high+street.%0A%0A+The+query+uses+the+%22nwr%22+specifier+to+query+for+%28n%29odes%2C%0A+%28w%29ays+and+%28r%29elations.+Sometimes+local+businesses+might%0A+only+be+tagged+as+points%2C+in+other+cases+the+entire+outline+of%0A+a+building+might+be+drawn+and+tagged.+This+allows+us+to%0A+find+information+regardless+of+how+its+represented+on+the+map.%0A%0A+The+query+also+uses+a+range+of+different+filters+to+identify%0A+the+information+we%27re+interested+in.+In+this+case+a+variety+of%0A+building%3D%2A+and+amenity%3D%2A+filters.+The+result+will+be+the+union%0A+of+all+nodes%2C+ways+and+relations+that+have+these+tags.%0A%0A+A+global+bounding+box+query+filter+is+used+to+specify+the%0A+location+we+are+interested+in.+The+special+%22%7B%7Bbbox%7D%7D%22+syntax+here+means%0A+this+query+only+works+in+Overpass+Turbo+which+determines+the%0A+bounding+box+based+on+your+zoom+level.%0A%0A+Alternatively+you+could+specify+a+fixed+bounding+box%3A%0A+%5Bbbox%3A%28%22...%22%29%5D+specifying+the+coordinates.%0A%0A+%40title+Extract+data+for+a+typical+UK+high+street%0A+%2A%2F%0A%5Bbbox%3A%7B%7Bbbox%7D%7D%5D%3B%0A%28%0A++nwr%5B%22building%22%3D%22retail%22%5D%3B%0A++nwr%5B%22building%22%3D%22supermarket%22%5D%3B%0A++nwr%5B%22building%22%3D%22commercial%22%5D%3B%0A%0A++nwr%5B%22amenity%22%3D%22pub%22%5D%3B%0A++nwr%5B%22amenity%22%3D%22bar%22%5D%3B%0A++nwr%5B%22amenity%22%3D%22restaurant%22%5D%3B%0A++nwr%5B%22amenity%22%3D%22cafe%22%5D%3B%0A++nwr%5B%22amenity%22%3D%22library%22%5D%3B%0A++nwr%5B%22amenity%22%3D%22bank%22%5D%3B%0A++nwr%5B%22amenity%22%3D%22fast_food%22%5D%3B%0A%29%3B%0Aout+body%3B%0A%3E%3B%0Aout+skel+qt%3B%0A&R" target="_blank">https://overpass-turbo.eu/</a>
					    </li>
					</ul>

              </div>
          </div><!--/row-->
        </div><!--/span-->
      </div><!--/row-->

</div>

      </main>

       <footer class="footer mt-auto py-3 bg-light">
         <div class="container">
           <span class="text-muted">Generated with <a href="http://github.com/ldodds/overpass-doc">overpass-doc</a>.</span>
         </div>
       </footer>


  </body>
</html>
